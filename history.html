<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

<header>
    <div class="logo">HISTORY</div>
    <button class="btn btn-outline" onclick="clearHist()" style="padding:5px 10px; font-size:0.7rem;">Clear All</button>
</header>

<div id="list" style="padding:15px; display:flex; flex-direction:column; gap:10px;"></div>

<nav class="bottom-nav">
    <a href="index.html" class="nav-item"><i data-lucide="home"></i> Home</a>
    <a href="schedule.html" class="nav-item"><i data-lucide="calendar"></i> Jadwal</a>
    <a href="history.html" class="nav-item active"><i data-lucide="history"></i> History</a>
</nav>

<script>
    function loadHist() {
        const data = JSON.parse(localStorage.getItem('my_history')) || [];
        const container = document.getElementById('list');

        if(data.length === 0) {
            container.innerHTML = `<p style="text-align:center; color:#555; margin-top:50px;">Belum ada history tontonan.</p>`;
            return;
        }

        container.innerHTML = data.map(item => `
            <div style="background:var(--bg-card); padding:10px; border-radius:var(--radius); display:flex; align-items:center; gap:12px; cursor:pointer;" onclick="window.location.href='stream.html?url=${item.url}'">
                <div style="background:#222; width:50px; height:50px; border-radius:8px; display:flex; align-items:center; justify-content:center;">
                    <i data-lucide="play" style="width:20px; color:var(--primary);"></i>
                </div>
                <div style="flex:1;">
                    <h4 style="margin:0; font-size:0.9rem; color:#fff; line-height:1.2;">${item.title}</h4>
                    <span style="font-size:0.75rem; color:var(--text-sec);">${item.date}</span>
                </div>
            </div>
        `).join('');
        lucide.createIcons();
    }

    function clearHist() {
        if(confirm("Hapus semua history?")) {
            localStorage.removeItem('my_history');
            loadHist();
        }
    }

    loadHist();
</script>
</body>
</html>
